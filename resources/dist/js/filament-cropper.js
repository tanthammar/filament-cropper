function s(t){return{showCropper:!1,filename:"",filetype:"",width:t.width,height:t.height,shape:t.shape,statePath:t.statePath,aspectRatio:t.aspectRatio,appliedAspectRatio:t.aspectRatio,rotatable:t.rotatable,rotateDegree:t.rotateDegree,dragMode:t.dragMode,viewMode:t.viewMode,zoomable:t.zoomable,scales:{flipHorizontal:1,flipVertical:1},cropper:null,async init(){this.$watch("files",async e=>{if(e===null||e[0]===void 0)return;let a=new FileReader;a.onload=i=>{this.$refs.cropper.src=i.target.result,setTimeout(()=>{this.destroyCropper(),this.initCropper()},500)},this.filename=e[0].name,this.filetype=e[0].type,await a.readAsDataURL(e[0])})},destroyCropper(){this.cropper!==null&&(this.cropper.destroy(),this.cropper=null)},async initCropper(){this.cropper=new Cropper(this.$refs.cropper,{aspectRatio:this.aspectRatio,rotatable:this.rotatable,dragMode:this.dragMode,viewMode:this.viewMode,zoomable:this.zoomable,crop(e){}})},rotateByValue(e){let a=this.cropper.getImageData().rotate;this.cropper.rotate(e-a)},resetRotate(){let e=this.cropper.getImageData().rotate;e=e-e*2,this.rotateDegree=0,this.cropper.rotate(e)},setAspectRatio(e){this.cropper.setAspectRatio(e),this.appliedAspectRatio=e},flip(){this.scales.flipVertical*=-1,this.scales.flipHorizontal*=-1,this.cropper.scale(this.scales.flipHorizontal,this.scales.flipVertical)},flipHorizontal(){this.scales.flipHorizontal*=-1,this.cropper.scale(this.scales.flipHorizontal,this.scales.flipVertical)},flipVertical(){this.scales.flipVertical*=-1,this.cropper.scale(this.scales.flipHorizontal,this.scales.flipVertical)},zoomByValue(e){this.cropper.zoom(e)},uploadCropperImage(){let e=this;this.cropper.getCroppedCanvas({maxWidth:e.width,maxHeight:e.height}).toBlob(a=>{let i=document.getElementById(this.statePath).querySelector('input[type="file"]'),p=new Event("change"),o=e.filename,l=e.filetype,h=new File([a],o,{type:l,lastModified:new Date().getTime()},"utf-8"),r=new DataTransfer;r.items.add(h),i.files=r.files,e.$dispatch("close-modal",{id:"cropper-modal-"+e.statePath,files:null}),i.dispatchEvent(p)},e.filetype)}}}export{s as default};
